import React from 'react'
import PropTypes from 'prop-types'
import styled from 'styled-components'

import { getBackgroundColor, getTextColor } from '../utils/style-utils'

const NORMAL_AA = 4.5
const NORMAL_AAA = 7
const LARGE_AA = 3
const LARGE_AAA = 4.5

const Svg = styled.svg`
  height: 48px;
  width: 144px;

  > path {
    transition: fill 150ms ease-in-out;
  }
`

const TextContrastIndicator = ({ contrast, isLarge }) => {
  const minAA = isLarge ? LARGE_AA : NORMAL_AA
  const minAAA = isLarge ? LARGE_AAA : NORMAL_AAA
  const passAA = contrast >= minAA
  const passAAA = contrast >= minAAA

  return (
    <Svg viewBox="0 0 60 20">
      <path
        d="M34.7,0H10a10,10,0,0,0,0,20H23.15Z"
        fill={getBackgroundColor(passAA)}
      />
      <path
        d="M50,0H37L25.46,20H50A10,10,0,0,0,50,0Z"
        fill={getBackgroundColor(passAAA)}
      />
      <g fill={getTextColor(passAA)}>
        <path d="M14.86,12.25,12.7,7.42c-.06-.13-.12-.19-.27-.18a7.12,7.12,0,0,1-.8,0,.28.28,0,0,0-.31.2c-.48,1.1-1,2.18-1.45,3.28-.26.58-.52,1.16-.79,1.78H9.7c.62,0,.62,0,.85-.56,0-.12.11-.25.15-.38s.14-.2.31-.2h1.58c.63,0,.63,0,.87.59s.23.55.8.55a3.38,3.38,0,0,1,.45,0C14.93,12.52,15,12.44,14.86,12.25Zm-3.53-1.81c-.15,0-.13-.07-.09-.16L12,8.44l.83,2Z" />
        <path d="M20.79,12.25c-.73-1.6-1.45-3.22-2.17-4.83a.23.23,0,0,0-.26-.18,7.3,7.3,0,0,1-.81,0,.26.26,0,0,0-.3.2c-.48,1.1-1,2.18-1.46,3.27L15,12.5h.63c.61,0,.61,0,.84-.56.05-.13.12-.25.16-.38s.14-.2.3-.2h1.59c.63,0,.63,0,.87.59s.22.55.8.55a3.23,3.23,0,0,1,.44,0C20.86,12.52,20.87,12.44,20.79,12.25ZM18.6,10.44H17.17c-.07,0,0-.1,0-.17l.76-1.82h0c.29.7.56,1.33.83,2H18.6Z" />
      </g>
      <g fill={getTextColor(passAAA)}>
        <path d="M42,12.25c-.73-1.6-1.45-3.22-2.17-4.83a.23.23,0,0,0-.26-.18,7.3,7.3,0,0,1-.81,0,.26.26,0,0,0-.3.2c-.48,1.1-1,2.18-1.46,3.28-.26.58-.52,1.16-.79,1.78h.63c.61,0,.61,0,.84-.56,0-.12.12-.25.16-.38s.14-.2.3-.2h1.59c.63,0,.63,0,.87.59s.22.55.8.55a3.23,3.23,0,0,1,.44,0C42.1,12.52,42.11,12.44,42,12.25Zm-3.54-1.81c-.15,0-.12-.07-.09-.16.25-.59.5-1.18.77-1.84.29.7.56,1.33.83,2Z" />
        <path d="M48,12.25c-.72-1.6-1.45-3.22-2.16-4.83-.06-.13-.12-.19-.27-.18a7.3,7.3,0,0,1-.81,0c-.16,0-.23,0-.3.2-.48,1.1-1,2.18-1.46,3.27-.26.59-.51,1.17-.79,1.79h.63c.61,0,.61,0,.84-.56a3.08,3.08,0,0,0,.16-.38c.05-.16.14-.2.3-.2h1.59c.63,0,.63,0,.87.59s.22.55.8.55a3.23,3.23,0,0,1,.44,0C48,12.52,48,12.44,48,12.25Zm-3.53-1.81c-.16,0-.13-.07-.09-.16.24-.59.49-1.18.77-1.84l.83,2Z" />
        <path d="M54,12.25c-.72-1.6-1.45-3.22-2.16-4.83-.06-.13-.12-.19-.27-.18a7.3,7.3,0,0,1-.81,0c-.16,0-.23,0-.3.2-.48,1.1-1,2.18-1.46,3.27-.26.59-.51,1.17-.79,1.79h.63c.61,0,.61,0,.84-.56a3.08,3.08,0,0,0,.16-.38c.05-.16.14-.2.3-.2h1.59c.63,0,.63,0,.87.59s.22.55.8.55a3.23,3.23,0,0,1,.44,0C54,12.52,54,12.44,54,12.25Zm-3.53-1.81c-.16,0-.13-.07-.09-.16.24-.59.49-1.18.77-1.84l.83,2Z" />
      </g>
    </Svg>
  )
}

TextContrastIndicator.defaultProps = {
  isLarge: false,
}

TextContrastIndicator.propTypes = {
  contrast: PropTypes.number.isRequired,
  isLarge: PropTypes.bool,
}

export default TextContrastIndicator
